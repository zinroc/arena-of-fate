module.exports = function (knex) {
    this.knex = knex;

    return {
        getAll: function () {
            return knex("fighters").select("*");
        },
        getSkills: function (char_id){
            return knex("character_skills").select("*")
            .where("character", char_id);
        },
        getStrategyExperience: function (char_id){
            return knex("strategy_experience").select("*")
            .where("character", char_id);
        },
        /**
        *   getPlans gets the strat_experience of entries that have ranks
        */
        getPlans: function (char_id) {
            return knex("strategy_experience").select("*")
            .whereNotNull('rank').andWhere("character", char_id).orderBy("rank", "asc");
        },
        getTechCond: function(char_id) {
            return knex("technique_conditioning").select("*")
            .where("character", char_id);
        },
        getPlanTechniques: function(plan_id) {
            return knex("plan_techniques").select("*")
            .where("plan", plan_id).then(function (rows){
                return rows[0];
            });
        }
    };
};
